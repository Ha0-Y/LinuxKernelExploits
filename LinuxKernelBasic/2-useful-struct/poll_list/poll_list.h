/*
 * poll_list ?
 */
struct pollfd {
	int fd;
	short events;
	short revents;
};

struct poll_list {
	struct poll_list *next;
	int len;
	struct pollfd entries[0];
};

// int poll(struct pollfd fds[], nfds_t nfds, int timeout); 
// fds:一个pollfd结构的数组
// nfds:表示'fds'数组中的文件描述符数量
// timeout:表示超时时间，单位是毫秒。
int poll_example() {
  struct pollfd *pfds;
  int fd;
  int nfds = 256; 
  int timeout = 3000;
  pfds = calloc(nfds, sizeof(struct pollfd));
  fd = open("/etc/passwd", O_RDONLY);
  for (int i = 0; i < nfds; i++)
  {
      pfds[i].fd = fd;
      pfds[i].events = POLLERR;
  }
  poll(pfds, nfds, timeout);
  //将会进行阻塞，阻塞的时间由timeout决定
}