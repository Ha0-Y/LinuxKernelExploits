CC := clang
CFLAGS := -static -O2

all: dirtypipe_writeany dirtypipe_suid

dirtypipe_writeany: dirtypipe_writeany.c
	@echo "[+] start dirtypipe_writeany"
	$(CC) $(CFLAGS) $< -o $@
	@echo "[+] end"
	strip $@

dirtypipe_suid: dirtypipe_suid.c
	@echo "[+] start dirtypipe_suid"
	$(CC) $(CFLAGS) $< -o $@
	@echo "[+] end"
	strip $@

clean:
	echo "[+] clean up"
	rm -f dirtypipe_writeany dirtypipe_suid *.o